---
phase: 04-pdf-inhalte-und-bugs
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - data/catalog.json
  - src/services/pdf/pages/componentPage.js
  - src/services/pdf/pages/haustypPage.js
autonomous: true

must_haves:
  truths:
    - "Jede Komponentenseite zeigt einen emotionalen Hook-Text statt der technischen Beschreibung als Untertitel"
    - "Alle Katalogeintraege in allen 10 Kategorien haben ein emotionalHook-Feld"
    - "Fehlender emotionalHook faellt graceful auf description zurueck"
    - "Haustyp-Seite zeigt emotionalHook statt details/description als Beschreibungstext"
  artifacts:
    - path: "data/catalog.json"
      provides: "emotionalHook field on every catalog entry across all 10 categories"
      contains: "emotionalHook"
    - path: "src/services/pdf/pages/componentPage.js"
      provides: "Component page renderer using emotionalHook as subtitle"
      contains: "emotionalHook"
    - path: "src/services/pdf/pages/haustypPage.js"
      provides: "Haustyp page renderer using emotionalHook as description text"
      contains: "emotionalHook"
  key_links:
    - from: "src/services/pdf/pages/componentPage.js"
      to: "data/catalog.json"
      via: "component.emotionalHook accessed in renderComponent"
      pattern: "component\\.emotionalHook"
    - from: "src/services/pdf/pages/haustypPage.js"
      to: "data/catalog.json"
      via: "component.emotionalHook accessed in render for description text"
      pattern: "component\\.emotionalHook"
---

<objective>
Add emotionally compelling marketing text (emotionalHook) to every catalog entry and wire it into both the component page renderer and the haustyp page renderer.

Purpose: Component pages currently show a truncated technical description as subtitle (e.g., "CLIMA-tiv Aussenwand mit Holzwerkstoffplatte."). The Haustyp page uses `component.details || component.description` which also misses emotionalHook. Replacing these with emotional hooks transforms the PDF from a technical spec sheet into a sales brochure that excites customers. This fulfills requirement INH-03.

Output: All 32 catalog entries have an emotionalHook field, componentPage.js uses it as primary subtitle, and haustypPage.js uses it as primary description text -- both with graceful fallbacks.
</objective>

<execution_context>
@C:/Users/LehnerJ.LEHNER-HAUS/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/LehnerJ.LEHNER-HAUS/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@data/catalog.json
@src/services/pdf/pages/componentPage.js
@src/services/pdf/pages/haustypPage.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add emotionalHook field to all catalog entries</name>
  <files>data/catalog.json</files>
  <action>
Add an `"emotionalHook"` string field to EVERY entry in ALL 10 categories of `data/catalog.json`. The emotionalHook should be:
- 1-2 sentences max
- Written in emotionally compelling, sales-oriented German
- Focused on the BENEFIT to the homeowner (Bauherr), not technical specs
- Evoking feelings: safety, comfort, pride, health, sustainability, value

Place the emotionalHook field AFTER the `"name"` field and BEFORE `"description"` for consistent positioning.

**IMPORTANT: Draft all 32 emotionalHook strings in a scratchpad/notes BEFORE writing any to catalog.json.** This prevents quality degradation for later entries. Review all 32 together for consistent tone, appropriate length, and no repetitive phrasing before committing to the file. Each hook should feel distinct.

**Guidelines per category:**

**walls** (4 entries): Focus on living health (Wohngesundheit), breathing walls (diffusionsoffen), fire safety as peace of mind, and premium materials. Examples:
- climativ: "Ihr Zuhause atmet -- diffusionsoffen, wohngesund und mit F90 Brandschutz als Standard."
- climativ-gf: "Maximale Robustheit trifft Wohngesundheit -- Gipsfaser fuer hoechste Belastbarkeit im Alltag."
- climativ-plus: "Die staerkste Wand fuer Ihr KfW-40-Haus -- mehr Daemmung, mehr Komfort, mehr Energieersparnis."
- climativ-plus-gf: "KfW-40 Spitzenleistung mit der Robustheit von Gipsfaser -- fuer Familien, die das Beste wollen."

**innerwalls** (2 entries): Focus on living quality, sound insulation as privacy, healthy indoor air.

**windows** (2 entries): Focus on light, views, security, energy efficiency as comfort.

**tiles** (2 entries): Focus on aesthetics, durability, curb appeal, protection.

**haustypen** (6 entries): Focus on lifestyle, dreams, family life, individuality. Each house type has a different emotional angle (Bungalow = barrier-free ease, Stadtvilla = urban elegance, etc.).

**heizung** (2 entries): Focus on independence from fossil fuels, future-proof investment, comfort without compromise.

**lueftung** (3 entries, including "keine"): Focus on fresh air, health, energy savings. For "keine": "Bewaehrte Einfachheit -- frische Luft durch bewusstes Lueften."

**daecher** (4 entries): Focus on character, protection, style that defines the home.

**treppen** (5 entries, including "keine"): Focus on craftsmanship, daily comfort, design statement. For "keine": "Alles auf einer Ebene -- barrierefreies Wohnen ohne Kompromisse."

**decken** (2 entries): Focus on solid construction, sound comfort, premium feel underfoot.

Write authentic German text that a Lehner Haus sales consultant would use in conversation. Avoid marketing cliches. Be specific to each product's actual strengths.
  </action>
  <verify>
Validate JSON syntax: `node -e "const c = require('./data/catalog.json'); const cats = Object.keys(c); let total = 0; let hook = 0; cats.forEach(k => { c[k].forEach(e => { total++; if(e.emotionalHook) hook++; }); }); console.log(hook + '/' + total + ' entries have emotionalHook');"` -- should output "32/32 entries have emotionalHook" (or actual total count, all should match).
  </verify>
  <done>
Every catalog entry in all 10 categories has an emotionalHook field with emotionally compelling German sales text. JSON is valid and parseable.
  </done>
</task>

<task type="auto">
  <name>Task 2: Wire emotionalHook into componentPage and haustypPage renderers</name>
  <files>
    src/services/pdf/pages/componentPage.js
    src/services/pdf/pages/haustypPage.js
  </files>
  <action>
**componentPage.js:** Update the subtitle logic in `renderComponent()` (around lines 59-71) to prefer `emotionalHook` over `description`:

Replace the current shortDesc logic:
```javascript
let shortDesc = component.description ? component.description.split('.')[0] + '.' : '';
if (shortDesc && component.name) {
  shortDesc = shortDesc.replace(
    new RegExp('^' + component.name.replace(/[.*+?^${}()|[\]\\]/g, '\\$&') + '\\s*', 'i'),
    ''
  );
}
```

With:
```javascript
const emotionalText = component.emotionalHook || '';
let shortDesc = emotionalText || (component.description ? component.description.split('.')[0] + '.' : '');
if (!emotionalText && shortDesc && component.name) {
  shortDesc = shortDesc.replace(
    new RegExp('^' + component.name.replace(/[.*+?^${}()|[\]\\]/g, '\\$&') + '\\s*', 'i'),
    ''
  );
}
```

This way:
- If emotionalHook exists, it becomes the subtitle (no truncation, no name stripping needed)
- If emotionalHook is missing, falls back to the current description.split('.')[0] behavior
- The name-stripping regex only applies to the description fallback, not to emotionalHook

**haustypPage.js:** Update the description line (line 50) to prefer `emotionalHook` over `details`/`description`.

Replace:
```javascript
const desc = component.details || component.description || '';
```

With:
```javascript
const desc = component.emotionalHook || component.details || component.description || '';
```

This ensures the Haustyp page (which uses a separate renderer from componentPage.js for the 6 haustypen entries) also shows the emotional hook text. The fallback chain is: emotionalHook -> details -> description -> empty string.

Do NOT change any other part of either renderer (image handling, premium features, advantages, tech details, comparison tips, hero images).
  </action>
  <verify>
Start server, generate a PDF, and confirm:
1. Component pages (Aussenwand, Innenwand, Fenster, etc.) show the emotional hook text instead of the technical description first sentence
2. Haustyp page specifically shows the emotional hook text instead of details/description
3. Verify with: `node -e "const fs = require('fs'); const code = fs.readFileSync('src/services/pdf/pages/haustypPage.js', 'utf8'); console.log('haustypPage has emotionalHook:', code.includes('emotionalHook'));"` -- should output true
  </verify>
  <done>
Both componentPage.js and haustypPage.js display emotionalHook as primary text. Missing emotionalHook falls back gracefully (to description in componentPage, to details/description in haustypPage). No visual regression on other page elements.
  </done>
</task>

</tasks>

<verification>
1. `node -e "JSON.parse(require('fs').readFileSync('data/catalog.json'))"` succeeds (valid JSON)
2. Every catalog entry has a non-empty emotionalHook string
3. Component pages in generated PDF show emotional text, not technical descriptions
4. Haustyp page in generated PDF shows emotional text, not details/description
5. Pages with no emotionalHook (hypothetical fallback scenario) still render correctly
</verification>

<success_criteria>
- All catalog entries (32 across 10 categories) have emotionalHook field
- componentPage.js prefers emotionalHook over description for subtitle
- haustypPage.js prefers emotionalHook over details/description for description text
- Fallback to description/details works when emotionalHook is missing
- Generated PDF shows emotionally compelling text on every component page including Haustyp
</success_criteria>

<output>
After completion, create `.planning/phases/04-pdf-inhalte-und-bugs/04-02-SUMMARY.md`
</output>
